#!/usr/bin/env groovy
pipeline {                                                                                                       
     agent any
     triggers {
        cron('H/5 * * * *')
     }
     parameters {
        choice(name:'Cron_Config', choices:['H/5 * * * *','H/7 * * * *','H/10 * * * *'], description:"")
     }
     
     tools {nodejs "node"}
     
     stages {
        stage ("Build") {
           steps {
             sh 'npm install'
           }
        }
        stage ("Test Unit") {
            steps {
                sh "npm test"
            }
        }
        stage ("Run Code") {
            steps {
                sh "node index.js ${params.MY_PARAM}"
            }
        }
     }
  }